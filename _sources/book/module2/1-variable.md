# บทที่ 2 </br> ตัวแปร ฟังก์ชัน และสตริง

การเรียนรู้การใช้ตัวแปร ฟังก์ชัน และสตริงเป็นพื้นฐานสำคัญสำหรับการพัฒนาโปรแกรม เนื่องจากทำให้นักพัฒนาสามารถจัดการข้อมูลและควบคุมการทำงานของโปรแกรมได้อย่างคล่องแคล่ว ตัวแปรช่วยเก็บค่าต่างๆ ไว้ในหน่วยความจำ ฟังก์ชันทำให้โปรแกรมดำเนินการตามกระบวนการที่กำหนดไว้ ขณะที่สตริงเป็นชนิดข้อมูลพื้นฐานสำหรับการจัดการข้อความ เมื่อผู้เรียนเข้าใจหลักการเหล่านี้แล้ว พวกเขาจะสามารถสร้างโปรแกรมที่ซับซ้อนและมีประสิทธิภาพมากขึ้นได้ การเริ่มต้นด้วยพื้นฐานนี้จะช่วยวางรากฐานที่มั่นคงที่นำของการเขียนโปรแกรมที่ดี

```{admonition} จุดมุ่งหมายของบทนี้
- การประกาศและให้ค่ากับตัวแปร เพื่อใช้เก็บข้อมูลที่เป็นตัวเลข บูลีน และสตริง
- การเขียนฟังก์ชันที่มีหลายอาร์กิวเมนต์ (argument)
- การใช้ `for` `while` ร่วมกับตัวแปร
- การใช้เมท็อดของสตริงที่มักใช้บ่อย
```


## ตัวแปร (variable)
ลองนึกถึงสมัยประถมที่เราเริ่มเรียนวิธีการตั้งหารยาว หรือการคูณเลขสามหลักด้วยมือ ซึ่งเป็นอัลกอริธึมที่ค่อนข้างซับซ้อนที่ต้องทำด้วยมือซ้ำ ๆ จนชำนาญ อย่างหนึ่งที่สังเกตจากการตั้งหารยาวคือ ต้องมีการทดเลข จดไว้สักที่หนึ่ง เพื่อจะนำเอาผลการคูณหารของเลขแต่ละหลักมารวมกันอีกครั้งตอนสุดท้ายที่เพื่อที่จะได้ผลลัพธ์สุดท้าย  การทดเลข เปรียบได้กับการเก็บข้อมูลเอาไว้ในตัวแปรเพื่อจะนำมาใช้ทีหลัง 

```{margin} คำศัพท์
*ตัวแปร (variable)* วิธีการเก็บข้อมูลโดยกำหนดชื่อเรียกให้กับค่าที่เก็บ

*การกำหนดค่าให้ตัวแปร (variable assignment)* การเชื่อมโยงชื่อตัวแปรกับค่าที่ต้องการเก็บ
```

การเก็บข้อมูลใส่ตัวแปรเพื่อนำค่ามาใช้ทีหลัง เรียกว่า *การกำหนดค่าให้ตัวแปร (variable assignment)* ซึ่งจะต้องบอกเครื่องว่าชื่อของตัวแปรคืออะไร และค่าที่ต้องการ คำสั่งภาษาไพธอนมีกฏดังนี้
```
ชื่อตัวแปร = ค่่าที่ต้องการเก็บ
```
ตัวอย่าง เช่น ถ้าเราต้องการสร้างตัวแปรที่ชื่อว่า `num_words` เพื่อให้เก็บจำนวนคำที่เรานับมาได้จากบทความชิ้นหนึ่ง ซึ่งสมมติว่ามีค่าเท่ากับ 5000
```
num_words = 5000
```
ข้อควรระวังอย่างหนึ่งคือ ชื่อตัวแปรจะต้องมีลักษณะดังนี้ คือ
- ต้องขึ้นต้นด้วยตัวอักษรเท่านั้น (ห้ามใช้ตัวเลขหรือเครื่องหมายขึ้นต้น)
- ห้ามใช้คำที่สงวน เช่น `for` `while` `def` ฯลฯ ซึ่งเป็นคำที่สงวนใช้สร้างคำสั่งอื่น ๆ 
- ห้ามมีช่องว่างเลย

```{margin}
ตัว `>>>` ที่ปรากฏอยู่หน้าคำสั่งมีไว้เพื่อแสดงให้เห็นว่าเป็นการพิมพ์คำสั่งไพธอนลงไปบน `ipython`
```

ถ้าเกิดว่าไม่เขียนคำสั่งตามกฏ interpreter จะชี้บอกว่าเจอข้อผิดพลาด (error) ที่ไฟล์ไหน และบรรทัดที่เท่าไร ส่วนไหนของโค้ด และบอกด้วยว่าเป็น `SyntaxError`  เช่น
```
>>> number of words = 5000
  File "myprogram.py", line 1
    number of words = 5000
            ^
SyntaxError: invalid syntax
```
เป็นเพราะใส่ช่องว่างในชื่อตัวแปร

นอกจากนั้นแล้วชื่อตัวแปรที่ดีควรมีลักษณะดังนี้
- บ่งบอกถึงค่าที่ตัวแปรนั้นเก็บไว้ เช่น `num_words` เพื่อเก็บจำนวนคำ 
- เป็นคำนาม เพราะว่าตัวแปรเปรียบได้กับสิ่งของ 
- ควรเป็นตัวภาษาอังกฤษ ตัวเล็กทั้งหมด
- ถ้าชื่อตัวแปรมีหลายคำประกอบกันให้ ให้คั่นแต่ละคำด้วยตัวขีดล่าง `_` เช่น `number_of_words`
- อย่าให้มีความยาวจนเกินไป

ทั้งนี้เพราะหากมีตัวแปรหลายตัว อาจจะสับสนได้ว่าตัวแปรไหนเก็บอะไร ทำให้ทำความเข้าใจและแก้ไขโค้ดได้ลำบาก โดยเฉพาะอย่างยิ่งเวลานำโค้ดเป็นทีม จะต้องเขียนโค้ดให้คนในทีมอ่านรู้เรื่องได้ง่ายด้วย

สมมติว่าเราต้องการหาจำนวนคำโดยไม่นับเครื่องหมายวรรคตอน เพื่อให้ได้จำนวนคำที่แท้จริง สมมติว่าเราจำนวนเครื่องหมายวรรคตอนที่นับได้เท่ากับ 200 ตัว เราสามารถหาจำนวนโดยการสร้างตัวแปรขึ้นมาอีกตัวและหักลบกันดังนี้
```
num_words = 5000
num_punctuations = 200
num_words_no_puncs = num_words - num_punctuations
```
หากเราอยากทราบค่าของ `num_word_no_puncs` เราสามารถบอกให้เครื่องแสดงผลออกมาได้
```
>>> print(num_words_no_puncs)
4800
```
โค้ดที่อยู่ทางขวาของเครื่องหมาย `=` เรียกว่า *นิพจน์ (expression)* ซึ่งก็คือการนำตัวแปร ค่าคงที่มากระทำต่อกัน อย่างเช่นในตัวอย่างข้างบนที่เรานำตัวแปร `num_words` กับ `num_punctuations` มาลบกันโดยใช้ตัวดำเนินการ (operator หรือเรียกอีกอย่างว่า operand) `-` 

เวลาสร้างตัวแปรใหม่ Python interpreter จะแปลผลจากนิพจน์ก่อนแล้วค่อยให้ค่ากับตัวแปรที่มีชื่ออยู่ทางซ้ายมือ เพราะฉะนั้นลองคิดว่าดูว่าโค้ดข้างล่างนี้จะแสดงผลอะไรออกมา

```python
num_words = 5000
num_punctuations = 200
num_words_no_puncs = num_words - num_punctuations
num_punctations = 1000
print (num_words_no_puncs)
```
คำตอบคือ 4800 เท่าเดิมเนื่องจากเครื่องตีความผลของ `num_words - num_punctuations` ไปเสร็จเรียบร้อยแล้ว การแก้ค่าของตัวแปร `num_punctuations = 1000` ในบรรทัดต่อมา ไม่มีผลต่อค่าของ `num_words_no_puncs` ที่ถูกจัดเก็บไว้แล้ว


## ชนิดของตัวแปร (variable type) และข้อมูล (data type)
ตัวแปรในภาษาไพธอนมีหลายชนิด (type)
- `int` ย่อมาจาก integer มีไว้เก็บจำนวนเต็ม ตัวเลขที่ไม่มีจุดทศนิยม
- `float` มีไว้เก็บจำนวนที่มีจุดทศนิยม
- `str` สตริงมีไว้เก็บข้อความ
- `bool` มีไว้เก็บบูลีน (boolean) ที่มีค่า `True` หรือ `False`

และยังมีอีกมากซึ่งเราจะได้เห็นในบทต่อ ๆ ไป 

เวลาเราสร้างตัวแปรและกำหนดค่าให้ตัวแปร เราไม่ต้องเลือกเลยว่าจะต้องใช้ตัวแปรชนิดใด เพราะว่า python interpreter จะแปลค่าจากนิพจน์ที่อยู่ทางด้านขวามือและรู้เองว่าต้องใช้ตัวแปรชนิดใด แต่เราจำเป็นต้องรู้เองว่านิพจน์ได้ผลออกมาเป็นชนิดใด เพื่อจะเลือก operator ใช้ได้ถูกต้อง

### `int` และ `float`
เราสามารถสร้างนิพจน์ที่ประกอบด้วย `int` และ `float` ด้วยตัวดำเนินการเลขคณิต (arithmetic operator)
 ในภาษาไพธอนมีดังนี้

| Operator | ความหมาย | ตัวอย่าง |
| -------- | ---------| -------|
| + | บวก     | 3 + 2 --> 5| 
| - | ลบ      | 3 - 2 --> 1| 
| * | คูณ      | 3 * 2 --> 6| 
| / | หาร     | 3 / 2 --> 1.5| 
| // | หารแบบปัดเศษทิ้ง     | 3 // 2 --> 1| 
| ** | ยกกำลัง | 3 ** 2 --> 9|  
| % | หารแล้วได้เศษ (mod)| 3 % 2 --> 1|

นอกจากนั้นแล้วยังมีตัวดำเนินการเปรียบเทียบ (comparison operator) ที่ให้ค่าเป็นบูลีน 

| Operator | ความหมาย | ตัวอย่าง |
| -------- | ---------| -------|
| > | มากกว่า     | 3 > 2 --> `True`| 
| < | น้อยกว่า     | 3 < 2 --> `False`| 
| == | เท่ากัน      | 3 == 2 --> `False`| 
| != | ไม่เท่ากับ      | 3 != 2 --> `True`| 

ตัวอย่าง เช่น 

```python
num_words = 5000
pi = 3.14
average_words_per_page = num_words / 6
```
ทั้ง `pi` และ `average_words_per_page` เป็นตัวแปรไทป์ `float` เพราะ Python interpreter แปลผลนิพจน์ทางขวามือแล้วได้ค่าที่เป็นทศนิยม 

```{margin} คำศัพท์
`TypeError` คือ error ที่เกิดจากการใช้ข้อมูลผิดไทป์
```
ถ้าหากเราใช้ operator กับข้อมูลผิดไทป์เช่น 
```
>>> 'ฉันรักภาษาไทย' + 4
Traceback (most recent call last)
<ipython-input-11-1beaa930810f> in <module>
----> 1 'ฉันรักภาษาไทย' + 4

TypeError: can only concatenate str (not "int") to str
```
Python interpreter จะให้โยน `TypeError` ซึ่งแปลว่า error ที่เกิดจากการใช้ข้อมูลผิดไทป์ พร้อมทั้งบอกว่าผิดไทป์อย่างไร ในตัวอย่างนี้ บอกว่า operator `+` ต้องใช้กับสตริงและสตริง ไม่ใช่ สตริงกับ `int` 
```
>>> 4 + 'ฉันรักภาษาไทย'
Traceback (most recent call last)
<ipython-input-12-1c1a443c69f4> in <module>
----> 1 4 + 'ฉันรักภาษาไทย'

TypeError: unsupported operand type(s) for +: 'int' and 'str'
```
Python interpreter โยน `TypeError` และอธิบายว่า operator `+` ไม่สามารถใช้กับ `int` และสตริงได้

เพราะเหตุนี้เวลาเราเขียนโปรแกรมเราควรจำให้ได้ว่าไทป์ข้อมูลที่ตัวแปรและตัวเก็บเป็นข้อมูลไทป์ไหน และควรจะทราบด้วยว่าถ้าเครื่องโยน `TypeError` มาให้ตอนที่เรารันโปรแกรม เราควรจะแก้ไขโดยการตรวจไทป์ของข้อมูลให้เหมาะสม

### สตริง
เบื้องต้นเราสามารถสร้างสตริงเพื่อเก็บข้อความได้ดังนี้

```python
welcome_message = 'Welcome to my world!'
```
`welcome_message` เป็นตัวแปรชนิดสตริง เนื่องจากนิพจน์เป็นข้อความโดยเห็นได้จากเครื่อง `'` ที่คร่อมข้อความอยู่ 

ภาษาไพธอนสามารถใช้ operator `+` และ `*` กับสตริงได้ 

| Operator | ความหมาย | ตัวอย่าง |
| -------- | ---------| -------|
| + | ต่อสตริง (concatenate)     | `'aa' + 'bb'` --> `'aabb'`| 
| * | ซ้ำสตริง      | `'abc' * 3` --> `abcabcabc`| 

เราจะศึกษารายละเอียดของการสร้างสตริงในรูปอื่น ๆ ทั้งหมดในบทต่อไป

### บูลีน
```{margin}
ชื่อของตัวแปรที่เก็บค่าบูลีนควรจะขึ้นต้นด้วย `is_` + adjective หรือคำนาม เช่น `is_too_long` หรือ `is_newspaper` เป็นต้น
```
ค่าบูลีนสามารถเป็นได้แค่ `True` หรือ `False` ให้สังเกตว่าทั้งสองค่านั้นต้องสะกดด้วยตัวใหญ่ตัวแรก

นอกจากนั้นแล้วยังสามารถขึ้นมาได้ด้วยการใช้ comparison operator อีกด้วย
```python
is_long_book = num_words > 10000
```
จากตัวอย่างข้างบน `is_long_book` เป็นตัวแปรชนิดบูลีน เพราะว่านิพจน์ตีผลออกมาเป็น `False` 

operator ของบูลีนกับบูลีน ได้แก่ `and` `or` เราได้เห็นและใช้กันไปแล้วในบทที่ 1 

### Reassignment operator
การให้ค่าใหม่กับตัวแปร (reassignment หรือ update) สามารถทำได้โดยการใช้ `=` ซ้ำอีกครั้งได้เลย เช่น
```
num_words = 5000
num_words = 100
```
ใช้ตัวแปรชื่อเดิม `num_words` แต่ว่าให้ค่าใหม่กับตัวแปรนั้น ค่าของ `num_words` จะมีค่าเท่ากับ 100

อีกวิธีคือใช้ร่วมกับ arithmetic operator เช่น `+-*/` และอื่น ๆ ได้ เช่น
```
num_words = 5000
num_words += 1
```
ค่าของ `num_words` จะมีค่าเท่ากับ 5001 เราอาจจะลองแปลความหมายของ `+=` ได้ดังนี้
```
num_words = 5000
num_words = num_words + 1 
```
ซึ่งเราจะแปลความนิพจน์ทางขวามือของ `=` ก่อน จะได้เท่ากับ 5000 (ค่าของ `num_words` ในขณะนั้น) + 1 = 5001 จากนั้นจึงนำค่า 5001 ไปเก็บไว้ในตัวแปรชื่อว่า `num_words` 

อีกตัวอย่างหนึ่งของการใช้ reassignment operator
```
num_words = 5000
num_words -= 1
```
ซึ่งเหมือนกับการเขียน
```
num_words = 5000
num_words = num_words - 1
```
ค่าที่เก็บอยู่ใน `num_words` คือ 4999 หลังจากที่รันโค้ดแล้ว 

การใช้ reassignment operator เป็นที่นิยมมาก ถึงแม้ว่าจะไม่จำเป็นต้องใช้ก็ตาม อาจจะเห็นโปรแกรมเมอร์คนอื่นใช้ เราจึงต้องอ่านให้ออกว่าแปลว่าอะไร 

## ฟังก์ชัน (function)
ในบทที่หนึ่งเราได้เรียนรู้วิธีการเขียนฟังก์ชันที่สามารถนำกลับมาใช้อีกได้ในสถานการณ์ใกล้ ๆ กัน เพื่อช่วยย่อยโจทย์ออกมาเป็นส่วนย่อย ๆ และเป็นการประหยัดโค้ดอีกด้วย ที่จริงแล้วฟังก์ชันสามารถเขียนให้มีความยืดหยุ่นมากขึ้นโดยการเขียนฟังก์ชันที่รับอาร์กิวเมนต์ (argument) 

```{image} img/input-output.png
:height: 100px
:align: center
```

```{margin} คำศัพท์
parameter คือ ตัวแปรที่เป็นส่วนหนึ่งของการประกาศฟังก์ชัน
argument คือ ค่าเราให้กับ parameter ตอนเรียกใช้ฟังก์ชัน

แต่ว่าคนมักจะใช้สองคำนี้ปนกันบ่อยมาก จนกลายเป็นว่าเป็นคำที่ใช้แทนกันได้
```

ฟังก์ชันเหมือนกับฟังก์ชันทางคณิตศาสตร์ คือ มี 
- input ซึ่งในภาษาคอมพิวเตอร์เราเรียกว่า parameter หรือ argument 
- output ซึ่งในภาษาคอมพิวเตอร์เราเรียกว่า ค่ารีเทิร์น (return value)

ตัวอย่างฟังก์ชันที่เขียนเป็นโค้ดได้จะต้องกำหนดไทป์ของข้อมูลด้วยว่าเป็นไทป์ไหน เช่น 
- ฟังก์ชันหาค่าเฉลี่ยของเลขสองตัว
  - input คือ เลขสองตัว
  - output คือ ตัวเลขค่าเฉลี่ย
- ฟังก์ชันคำนวณพื้นที่สามเหลี่ยม 
  - input คือ ความยาวฐาน (`int` หรือ `float`) และความสูง (`int` หรือ `float`)
  - output คือ พื้นที่ (`float`) ที่ต้องเป็น `float` เนื่องจากตัวหารจะให้ผลลัพท์เป็น `float` เสมอ 
- ฟังก์ชันเปรียบเทียบความยาวข้อความว่าอันไหนยาวกว่า
  - input คือ ข้อความสองข้อความ (สตริง)
  - output คือ ค่าบอกว่าข้อความไหนยาวกว่า (บูลีน)
- ฟังก์ชันคำนวณภาษีมูลค่าเพิ่ม
  - input คือ ยอดซื้อ อัตราภาษี และตัวเลือกว่าจะปัดเศษหรือไม่
  - output คือ ภาษี

เราจะสังเกตได้ว่าฟังก์ชันมีความยืดหยุ่นสูงสามารถปรับใช้ในสถานการณ์ต่าง ๆ ได้โดยการปรับค่า argument ของแต่ละฟังก์ชัน เช่น วันหนึ่งถ้าอัตราภาษีมีการปรับเปลี่ยน เราก็ไม่ต้องเขียนฟังก์ชันใหม่ เราแค่ใส่อัตราภาษีใหม่เข้าไปเป็น input

### การประกาศฟังก์ชันแบบมี argument 

ฟังก์ชันแบบมี argument ในภาษาไพธอนมีลักษณะดังนี้
```python
def compute_vat(amount, vat_rate, round_decimal):
  vat = amount * vat_rate
  if round_decimal:
    return int(vat)
  else:
    return vat
```

นี่คือฟังก์ชันที่คำนวณภาษีมูลค่าเพิ่มจากยอดการซื้อ โดยปรับได้ด้วยว่าจะให้ปัดทศนิยมด้วยหรือไม่ ฟังก์ชันภาษาไพธอนมีกฏดังนี้

- ต้องขึ้นต้นด้วยคำว่า `def` ตามด้วยชื่อฟังก์ชัน ตามด้วยวงเล็บ ตามด้วยชื่อ argument ทั้งหมด แต่ละตัวคั่นด้วย `,` และบรรทัดการประกาศฟังก์ชันด้วย `:` 
- ตัวเนื้อหาฟังก์ชันต้องมีการเคาะย่อหน้า
- ควรจะต้องมีการ `return` output ออกจากฟังก์ชัน 

โดยทั่วไปแล้วกฏไวยากรณ์ของการประกาศฟังก์ชัน มีดังนี้
```
def ชื่อฟังก์ชัน(argument1, argument2):
  ตัวเนื้อหาฟังก์ชัน
  return ค่าที่ต้องการรีเทิร์น
```

ข้อสังเกตที่สำคัญ คือ argument ของภาษาไพธอนจะไม่มีการบังคับชนิดของข้อมูลเอาไว้อย่างชัดเจน ทำให้เกิดข้อผิดพลาดได้เวลานำฟังก์ชันไปใช้ เพราะผู้ใช้อาจจะนำข้อมูลมาใส่ผิดไทป์ เช่น ถ้านำสตริงมาใส่แทนตัวเลข เครื่องจะให้ error กลับคืนมาเมื่อนำสตริงไปคูณกับสตริง เพราะว่าการคูณสตริงไม่มีความหมายใด ๆ เพราะฉะนั้นเราอาจจะเขียนกำกับ (type annotation) ไว้ในฟังก์ชันได้ว่า argument ควรจะเป็นข้อมูลชนิดอะไร เช่น

```python
def compute_vat(amount:float, vat_rate:float, round_decimal:bool):
  vat = amount * vat_rate
  if round_decimal:
    return int(vat)
  else:
    return vat
```
argument แต่ละตัวถูกเขียนกำกับว่าเป็น type อะไรโดยการเขียน `:type` ลงท้าย argument แต่ละตัว 
การกำกับ type ในลักษณะนี้เป็นการช่วยเหลือคนเขียนโปรแกรมเท่านั้น ทำให้รู้ว่าฟังก์ชันรับ input มาเป็นอะไรบ้าง และตัว IDE ก็นำข้อมูลนี้ไปช่วยตรวจสอบโค้ดให้ได้ในระดับหนึ่ง แต่ว่าเครื่องไม่ได้ช่วยตรวจจับ error ตอนนำฟังก์ชันไปใช้แต่อย่างใด และจะเห็นได้ว่าฟังก์ชันจะดูรก ไม่สะอาดตาเหมือนก่อน คนจึงไม่ค่อยนิยมเขียนกำกับ type เท่าไรนัก

### การเรียกฟังก์ชัน (function call)
```{margin} คำศัพท์
การส่งผ่านค่าพารามิเตอร์ (parameter passing) คือ การระบุค่าของพารามิเตอร์แต่ละตัวของฟังก์ชัน
```
ถ้าหากว่าฟังก์ชันที่เราต้องการเรียกเป็นฟังก์ชันแบบที่มีพารามิเตอร์/อาร์กิวเมนต์ เราจะต้องส่งผ่านค่า input พารามิเตอร์ (parameter passing) ให้กับฟังก์ชันให้ครบทุกตัว ตัวอย่างเช่น ถ้าหากเราต้องการเรียกฟังก์ชันนี้

```python
def compute_vat(amount, vat_rate, round_decimal):
  vat = amount * vat_rate
  if round_decimal:
    return int(vat)
  else:
    return vat
```
ซึ่งเป็นฟังก์ชันที่ต้องการสามพารามิเตอร์ มีวิธีการเรียกดังนี้
```
compute_vat(1000.0, 0.7, True)
```
ซึ่งจะแทนค่าตามลำดับของพารามิเตอร์ที่ระบุไว้ในบนหัวฟังก์ชัน (function header) เพราะฉะนั้นเราจะแทนค่าของพารามิเตอร์ดังนี้ให้
- `amount = 1000.0`
- `vat_rate = 0.7`
- `round_decimal = True`

จากนั้นจะรันโค้ดทีละบรรทัด ตามค่าของพารามิเตอร์ส่งผ่านเข้ามาในฟังก์ชัน

ฟังก์ชันจะโยน error มาให้เราถ้าเราใส่พารามิเตอร์ไม่ครบ
```
>>> compute_vat(200.0)
Traceback (most recent call last)
<ipython-input-14-05dd24f91a52> in <module>
----> 1 compute_vat(200.0)

TypeError: compute_vat() missing 2 required positional arguments: 'vat_rate' and 'round_decimal'
```

## ฟังก์ชันที่มีมาให้อยู่แล้ว หรือฟังก์ชันบิวท์อิน (built-in function)
```{margin} คำศัพท์
ฟังก์ชันที่มีมาให้อยู่แล้ว หรือฟังก์ชันบิวท์อิน(built-in function) คือฟังก์ชันที่มีมาให้อยู่แล้วสามารถเรียกใช้ได้เลย โดยไม่ต้องประกาศฟังก์ชันก่อน
```
ตอนติดตั้ง Python interpreter เราจะได้ฟังก์ชันบิวท์อินที่เราสามารถเรียกใช้ได้เลยเพื่ออำนวยความสะดวกในการเขียนโค้ด ฟังก์ชันที่ควรรู้มีดังนี้

### `print`: แสดงผลของจากการตีความ expression
ตัวอย่าง
```python
def compute_rectangle_area(width, height):
  area = width * height
  print (area)
```
เมื่อเรียกฟังก์ชัน
```
>>> compute_rectangle_area(3, 5)
9
```

#### ข้อควรระวัง
ผู้ที่หัดเขียนโปรแกรมใหม่ ๆ มักจะสับสนระหว่าง `print` กับ `return` ให้เปรียบเทียบกับอีกฟังก์ชันที่ใช้ `return` แทน `print`
```python
def compute_rectangle_area2(width, height):
  area = width * height
  return area
```
ฟังก์ชันนี้ไม่ได้แสดงผลการคำนวณโดยใช้คำสั่ง `print` แต่มีการ return ค่าเพื่อสามารถนำไปเก็บในตัวแปรอื่น ๆ ได้ เช่น ถ้าหากเราต้องการคำนวณพื้นที่ของสี่เหลี่ยมสองอัน เพื่อหาผลรวมของพื้นที่
```
>>> rect1 = compute_rectangle_area2(2,2)
>>> rect2 = compute_rectangle_area2(3,3)
>>> total_area = rect1 + rect2 
>>> print(total_area)
13
```
เมื่อเปรียบเทียบกับฟังก์ชันที่ไม่ return อะไรเลย
```
>>> rect1 = compute_rectangle_area(2,2)
4
>>> rect2 = compute_rectangle_area(3,3)
9
>>> total_area = rect1 + rect2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'
```
ในกรณีนี้พอเรียกฟังก์ชันแล้วจะมีการแสดงผลค่าตัวแปรที่อยู่ในฟังก์ชันทันที แต่ว่าตัวแปร `rect1` และ `rect2` ไม่ได้เก็บค่าอะไรไว้เลย ซึ่งภาษาไพธอนกำหนดให้ว่าไทป์ข้อมูลคือไทป์ `NoneType` ซึ่งไม่ได้สามารถนำบวกกันได้ จึงโยน `TypeError` มาให้


### `input`: รับข้อมูลสตริงจากผู้ใช้
ฟังก์ชัน `input` ต้องใส่พารามิเตอร์หนึ่งตัว คือข้อความที่บอกให้ผู้ใช้ใส่ข้อความ เมื่อฟังก์ชันนี้ถูกเรียกโปรแกรมจะหยุดรอให้ผู้ใช้พิมพ์ข้อความลงไป 
ตัวอย่าง
```python
def print_welcome_message():
  name = input('กรุณาใส่ชื่อของท่าน :')
  print ('ยินดีต้อนรับคุณ' + name)
```
เมื่อเวลาใช้จริงจะได้ผลดังนี้
```
>>> print_welcome_message()
กรุณาใส่ชื่อของท่าน :
```
โปรแกรมจะหยุดเพื่อให้่ผู้ใช้พิมพ์ข้อมูลเข้าไปและกด enter เพื่อป้อนข้อมูล
```
>>> print_welcome_message()
กรุณาใส่ชื่อของท่าน :อรรถพล
ยินดีต้อนรับคุณอรรถพล
```

### `str`, `int`, และ `float`: แปลงไทป์ของข้อมูล
`str`, `int`, และ `float` ใช้สำหรับแปลงข้อมูลเป็นสตริง `int` และ `float` ตามลำดับ 

`str` ใช้แปลงข้อมูลให้เป็นสตริง ตัวอย่างเช่น
```
>>> code = str(10) + str(90)
>>> print(code)
'1090'
```
โค้ดด้านบนแปลงตัวเลข 10 และ 90 ให้เป็นสตริง จากนั้นค่อยนำมาต่อกัน (concatenate)

`int` ใช้แปลงข้อมูลให้เป็นจำนวนเต็ม ตัวอย่างเช่น
```
>>> int(10.20) + 1
11
>>> int('100') + 1
101
```
ถ้าหากเราไม่แปลงไทป์ของข้อมูลก่อน เราจะได้ `TypeError`
```
>>> num = '100' 
>>> num + 1
Traceback (most recent call last)
<ipython-input-4-eed9c9d1e565> in <module>
----> 1 '100' + 1

TypeError: can only concatenate str (not "int") to str
```
ฟังก์ชันนี้ใช้ควบคู่กับ `input` เมื่อเราต้องการให้ผู้ใช้พิมพ์ตัวเลขลงมา เช่น

```python
def genx_classifier_program():
  year = input('ท่านเปิดปีค.ศ.อะไร : ')
  print ('ท่านเกิดเมื่อปี ค.ศ. ' + year)
  year = int(year)
  if 1965 < year < 1980:
    print ('ท่านเป็น Gen X')
  else:
    print ('ท่านไม่ได้เป็น Gen X')
```
เมื่อเรียกใช้ 
```
>>> genx_classifier_program()
ท่านเปิดปีค.ศ.อะไร : 
```
โปรแกรมจะหยุดรอให้พิมพ์ปีลงไป
```
>>> genx_classifier_program()
ท่านเปิดปีค.ศ.อะไร : 1986
ท่านเกิดเมื่อปี ค.ศ. 1986
ท่านไม่ได้เป็น Gen X
```

ถ้าเราไม่แปลงเป็น `int` ก่อนก็จะเปิดปัญหา
```python
def genx_classifier_program2():
  year = input('ท่านเปิดปีค.ศ.อะไร : ')
  print ('ท่านเกิดเมื่อปี ค.ศ. ' + year)
  # ไม่ยอมแปลง type ก่อน
  if 1965 < year < 1980:
    print ('ท่านเป็น Gen X')
  else:
    print ('ท่านไม่ได้เป็น Gen X')
```
เมื่อลองใช้จะได้รับ `TypeError`
```
>>> genx_classifier_program2()
ท่านเปิดปีค.ศ.อะไร : 1986
ท่านเกิดเมื่อปี ค.ศ. 1986
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in genx_classifier_program2
TypeError: '<' not supported between instances of 'int' and 'str'
```


### `type`: การตรวจสอบไทป์ของข้อมูล

เราสามารถตรวจสอบไทป์ของตัวแปรโดยคำสั่ง `type` เช่น
```
>>> num_words = 5000
>>> average_words_per_page = num_words / 6
>>> print(type(average_words_per_page))
<class 'float'>
```
และ
```
>>> welcome_message = 'Welcome to my world!'
>>> print(type(welcome_message))
<class 'str'>
```
## โมดูล (module)
โมดูลในภาษาไพธอน เป็นกลุ่มของฟังก์ชันซึ่งต้องโหลดเข้ามาก่อนจึงจะใช้ได้ วิธีการโหลดโมดูลมาใช้ให้ใช้คำสั่ง `import` ตามด้วยชื่อโมดูล ซึ่งเราทำทีเดียวสามารถใช้โมดูลได้ตลอดจนกว่าโปรแกรมจะจบ หรือเราปิด interpreter ไป เช่น
```python
import math             # โหลดโมดูลชื่อว่า math
result = math.sqrt(9)   # เรียกฟังก์ชัน sqrt ที่อยู่ในโมดูล math
print(result)
```
Output: `3.0`

ในโค้ดข้างบนนี้เราใช้คำสั่ง `import`  เพื่อโหลดโมดูลชื่อว่า `math` ซึ่งเป็นกลุ่มของฟังก์ชัน  

```{margin} 
`NameError` คือ error ที่เกิดขึ้นเวลา python interpreter หาไม่เจอว่าชื่อที่ใช้อ้างถึงตัวแปร หรือฟังก์ชันอะไร
```
ถ้าเราไม่ `import` เข้ามาก่อนจะเกิด `NameError`
```
>>> math.sqrt(9)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'math' is not defined
>>> sqrt(9)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'sqrt' is not defined
```
error นี้เกิดขึ้นเพราะเครื่องไม่รู้ว่า `math` หรือ `sqrt` คืออะไร เป็นตัวแปร หรือฟังก์ชัน หรือโมดูลกันแน่ เพราะว่าเราไม่ได้โหลดเข้ามาก่อน 


ภาษาไพธอนมากับโมดูลที่สามารถโหลดใช้ได้เลย (built-in module) เราสามารถเปิดหาได้ว่าภาษาไพธอนมีโมดูลอะไรบ้าง ถ้าเราสะกดชื่อโมดูลผิดจะเกิด error ดังนี้
```
>>> import masth
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ModuleNotFoundError: No module named 'masth'
```
intepreter โยน `ModuleNotFoundError` มาให้และบอกอีกว่าหาโมดูลชื่อว่า `masth` ไม่เจอ

สรุปการใช้ฟังก์ชันโมดูลมีไวยากรณ์ดังนี้
```
import ชื่อโมดูล
ชื่อโมดูล.ชื่อฟังก์ชันในโมดูล(พารามิเตอร์ต่างๆ)
```
ในบทหลัง ๆ เราจะเรียนรู้วิธีการดาวน์โหลดโมดูลจากแหล่งอื่น ๆ (ไลบรารี) เพื่อนำฟังก์ชันอื่น ๆ มาใช้อำนวยความสะดวกในการประมวลผลข้อมูล


## ตัวอย่าง และแพทเทิร์นที่พบเห็นได้บ่อย

### ใช้ตัวแปรจากใน `for`
โจทย์: จงเขียนโปรแกรมที่พิมพ์ตัวเลขออกมาตั้งแต่ 1 ถึง 10
```python
for i in range(10):
  print(i+1)
```
ในบทที่แล้วเราได้เห็น control flow ในการสั่งให้เครื่องทำอะไรซ้ำ ๆ ด้วย `for` loop ตัวแปร `i` ที่จริงแล้วเปลี่ยนค่าไปเรื่อย ๆ ตั้งแต่ 0 ถึง 9 จากนั้นจึงออกจาก loop เพราะฉะนั้นเราสามารถนำตัวแปร `i` ซึ่งเก็บค่าที่บอกว่า loop ไปกี่รอบแล้ว นำมาใช้ได้เลย

โจทย์นี้สามารถแก้ด้วยอีกวิธีหนึ่งดังนี้
```python
for num in range(1, 10+1):
  print(num)
```
ข้อควรสังเกต
- เราใช้ตัวแปร `num` แทน `i` เหมือนตัวแปรทั่ว ๆ ไป เราสามารถเปลี่ยนชื่อตัวแปรเป็นอะไรก็ได้ที่สื่อความหมาย
- `range(beginning, end)` เป็นฟังก์ชันที่สามารถใส่พารามิเตอร์สองตัวก็ได้ ภาษาไพธอนมีวิธีในการประกาศฟังก์ชันในลักษณะนี้ซึ่งเราจะเรียนในบทต่อไป 
- พารามิเตอร์ตัวแรก คือ จำนวนที่จะกำหนดให้ตัวแปรใน `for` 
- พารามิเตอร์ตัวที่สอง คือ จำนวนสุดท้าย เมื่อตัวแปรใน `for` มาถึงตัวเลขตัวนี้แล้วโปรแกรมจะออกจาก loop

### update ตัวแปรข้างใน `for` loop
โจทย์: จงเขียนโปรแกรมที่หาค่าผลรวมต้ังแต่ 1+2+3+4+5 จนถึง n โดยให้ n เป็นพารามิเตอร์ที่ให้ผู้ใช้ปรับได้ 

```python
def sum_up_number_until(n):
  """Sum up number from 0 to n

  sum_up_number_until(3) should return 0+1+2+3 = 6

  Example:
  >>> sum_up_number_until(3) 
  6
  >>> sum_up_number_until(4) 
  10  
  """
  total = 0
  for i in range(n+1):
    total += i
  return total
```

ข้อควรสังเกต
- แพทเทิร์นที่เห็นบ่อย ๆ คือ สร้างตัวแปรที่ทำหน้าที่เหมือนกระดาษทดเอาไว้ เก็บค่า 0 ไว้ก่อน
- พออยู่ใน loop ให้อัพเดทค่านั้นไปในแต่ละรอบที่วนอยู่ ซึ่งเราจะใช้ `+=` ในกรณีนี้
- ออกจาก loop ได้ผลลัพท์เรียบร้อยแล้วค่อย return

## สตริง
สตริง เป็นประเภทของข้อมูลที่ใช้สำหรับเก็บข้อมูลที่เป็นรูปแบบตัวหนังสือหรืออักขระ (character) อื่น ๆ อักขระที่เราพบบ่อยและสตริงสามารถจัดเก็บได้มีหลายประเภทด้วยกัน
- ตัวเลข เช่น `'007'`
- ตัวลาติน เช่น `'Begrüßung'` `'la République française'` 
- ตัวเขียนของภาษาทุกภาษา เช่น `'流星雨'` `'いらっしゃいませ'` `'สามย่าน'`
- เครื่องหมายวรรคตอนของภาษาอังกฤษ (เช่น `*&?#$!«`) หรือภาษาไทย (เช่น `'๏๛ฯ'`) 
- Emoji เช่น `'😂😃🧘🏻‍♂️🌍🌦️🍞🚗📞🎉🍆'`
- อักขระพิเศษ (special character) มีหลายตัวด้วยกัน แต่ว่าตัวที่พบเห็นบ่อยได้แก่
-- `\n` คือ new line character ซึ่งเป็นสัญลักษณ์ใช้ในการบ่งบอกให้ขึ้นบรรทัดใหม่
-- `\t` คือ tab character ซึ่งเป็นสัญลักษณ์บ่งบอกถึงแท็บ (กลุ่มของช่องว่าง) ซึ่งอาจใช้สำหรับการบ่งบอกให้ขึ้นย่อหน้าใหม่

### การสร้างสตริง

วิธีการสร้างสตริงโดยการพิมพ์ข้อความเข้าไปในตัวโค้ดโดยตรง เรียกว่าการสร้าง string literal ซึ่งต่างจากการสร้างสตริงขึ้นมาโดยกาเรียนฟังก์ชันอื่น ๆ 

การสร้าง string literal มีอยู่อย่างน้อย 3 วิธี

#### 1. คร่อมข้อความด้วย single quote 
```python
first_sentence = 'I dreamed a dream in times gone by'
```
การใช้ single quote สะดวกดีเพราะว่าไม่ต้องกดปุ่ม shift และดูสะอาดตา แต่ว่าจะเปิดปัญหาเมื่อข้อความที่เราเก็บมี `'` อยู่ข้างในอยู่แล้ว เช่น
```
>>> climax_sentence = 'So different from this hell I'm living'
  File "<stdin>", line 1
    climax_sentence = 'So different from this hell I'm living'
                                                     ^
SyntaxError: invalid syntax
```
```{margin} คำศัพท์
หนีสตริง (escaping a string) คือการใช้เครื่องหมายอื่นในการบอกให้เครื่องรู้ว่าเครื่องหมายที่ตามมาให้ถือว่าเป็นข้อความอย่างหนึ่ง ไม่มีความพิเศษอื่นใด 
```
ซึ่งผิดไวยากรณ์เพราะ interpreter นึกว่า `'` ใน `I'm` ใช้ทำหน้าที่บอกจุดสิ้นสุดของสตริง เราจำเป็นต้องใช้การหนี (escape) โดยการใช้เครื่องหมาย `\` เพื่อบอกกับเครื่องว่า `'` ที่ตามหลังมาให้ถือว่าเป็นสตริง ไม่ใช่เครื่องหมาย quote เช่น
```
>>> climax_sentence = 'So different from this hell I\'m living'
>>> print(climax_sentence)
So different from this hell I'm living
```

#### 2. คร่อมข้อความด้วย double quote เช่น
```
>>> climax_sentence = "So different from this hell I'm living"
>>> print(climax_sentence)
So different from this hell I'm living
```
จะสังเกตได้ว่าเราไม่ต้องหนี `'` เพราะเราใช้ `"` ในการสร้างสตริงแทน

แต่ก็ยังเกิดปัญหาคล้าย ๆ กันได้ถ้าเราใช้ `"` ในการคร่อมข้อความเพื่อสร้างสตริง และข้อความของเรามี `"` อยู่ในนั้น ทำให้เครื่องสับสน
```
>>> news_opening = "The spokesman reported "The company is in a great position." after being pressed many times"
File "<stdin>", line 1
news_opening = "The spokesman reported "The company is in a great position." after being pressed many times"

SyntaxError: invalid syntax
```
เราต้องทำการหนี `"` โดยการใช้ backslash `\` เช่นเคย
```python
news_opening = "The spokesman reported \"The company is in a great position.\" after being pressed many times"
```

#### 3. คร่อมข้อความด้วย triple quote 

การสร้างสตริงด้วยวิธีนี้เป็นวิธีเดียวที่จะสร้าง string literal ที่มีหลาย ๆ บรรทัดอยู่ โดยตัวคั่นบรรทัดนั้นเครื่องจะจัดเก็บอยู่ในตัวอักขระพิเศษ `\n` เช่น 

```
>>> juliet_speech = """O Romeo, Romeo, wherefore art thou Romeo?
... Deny thy father and refuse thy name."""
>>> juliet_speech
'O Romeo, Romeo, wherefore art thou Romeo?\nDeny thy father and refuse thy name.'
>>> print(juliet_speech)
O Romeo, Romeo, wherefore art thou Romeo?
Deny thy father and refuse thy name.
```


### เข้าถึงตัวอักษรที่อยุ่ในสตริง

```{image} img/char-index.png
:height: 150px
:align: center
```
```{margin} คำศัพท์
index เลขชี้ตำแหน่ง
```
เราใช้ operator `[]` ครอบตำแหน่งที่ต้องการจะดึงตัวอักษรออกมา (index) แต่จะนับเริ่มจากศูนย์ เพราะฉะนั้น `string[a]` return ตัวอักขระจากช่องที่ index `a` ตามที่เห็นดังภาพข้างบน 

ภาษาไพธอนมีการดึงตัวอักขระโดยนับจากข้างหลังได้ด้วยโดยตัวอักขระสุดท้ายของสตริงจะเริ่มที่ -1 เพราะฉะนั้น `string[-a]` return ตัวอักขระจากช่องที่ index `-a` ซึ่งเราเรียกว่าการใช้เลข index ติดลบ (negative indexing)

ตัวอย่าง สมมติว่าเราได้รัน `s = 'นายสมชาย'` 
| คำสั่ง 			  | output |
| -------			|--------|
| `s[1]`			| `'า'`	 |
| `s[-3]`			| `'ช'`	 |
| `s[3]`			| `'ส'`	 |
| `s[-5]`			| `'ส'`	 |

```{margin} 
`IndexError` คือ error ที่เกิดจากการที่ใช้เลข index ที่ไม่อยู่ในช่วงที่เหมาะสม 
```
ถ้าหากเรารัน `s[9]` หรือ `s[-10]` เราได้ข้อความบอก error ดังนี้
```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: string index out of range
```
เครื่องบอกว่า index ไม่ได้อยู่ในช่วงที่เหมาะสม เพราะจากสตริงที่เราสร้าง เราสามาเลือก index ตั้งแต่ 0-7 และ -1 ถึง -8


### การหั่นสตริง (String splicing)
เราสามารถหั่นสตริงตั้งต้นออกมาอีกสตริงหนึ่ง เพื่อตัดเอาส่วนของข้อความที่เราอยากได้ เช่น 
- นายสมชาย --> สมชาย (ตัดคำนำหน้าชื่อออก)
- http://www.chula.ac.th --> www.chula.ac.th (ตัด http:// ทิ้งเพื่อให้ได้ชื่อเว็บไซต์ที่สั้นลง)
- @terutherford --> terutherford (เอามาแต่ชื่ออินสตาแกรมไม่เอา @)
- #ไอจีล่ม --> ไอจีล่ม (ตัดเอาแฮชแท็กออกไป)

```{margin} คำศัพท์
สตริงย่อย (substring) คือ สตริงที่เป็นส่วนหนึ่งของสตริงอีกสตริงหนึ่งที่ยาวกว่า
```
การหั่นสตริง หรือการดึง substring ออกมาจากสตริง สามารถทำได้โดยการใช้ operator `[]` เช่นเคยแต่ว่าต้องระบุตำแหน่งที่ต้องการตัด substring ออกมา `[ตำแหน่งที่เริ่ม:ตำแหน่งที่จบ]` เช่น สมมติว่าเราต้องการดึง substring จากสตริง `s` ที่เก็บข้อความอยู่ดังนี้

```{image} img/substring-index.png
:height: 150px
:align: center
```
การดึง substring ให้นึกถึงว่าตัวเลข index ชี้ไปที่ร่องระหว่างตัวอักขระสองตัว เช่น index 3 อยู่ระหว่าง `'ย'` และ `'ส'` หรือ index -2 อยู่ระหว่าง `'ช'` และ `'า'`

ตัวอย่าง สมมติว่าเราได้รัน `s = 'นายสมชาย'` 
| คำสั่ง 		  | output | คำอธิบาย |
| -----			|--------|---------| 
| `s[0:3]`		| `'นาย'`	  |											
| `s[5:7]`		| `'ชา'`	  |
| `s[-3:-1]`	| `'ชา'`	  |
| `s[:3]`		| `'นาย'`   | ถ้าจุดเริ่มต้นเป็น 0 สามารถละออกไปได้
| `s[:-2]`		| `'นายสมช'`| negative indexing จากต้นสตริงถึง index -2
| `s[3:]`		| `'สมชาย'` | `[index:]` แปลว่าตัดจาก index ไปจนสุดสตริง
| `s[-5:]`		| `'สมชาย'` | negative indexing จาก index -5 ไปจนสุดสตริง

ไพธอนให้ความอะลุ่มอล่วยกับการใช้ index ในการดึง substring ค่อนข้างมาก ซึ่งข้อเสียก็คือ เวลาเราใส่ index ที่ผิดลงไปโดยไม่ได้ตั้งใจ interpreter จะไม่โยน `IndexError` ให้เรา แต่จะให้ output ที่เราไม่ได้คาดคิดมา ทำให้โปรแกรมเกิดข้อผิดพลาดเวลานำผลไปใช้ต่อกับคำสั่งอื่น ๆ 

| คำสั่ง 		  | output | คำอธิบาย |
| -----			|--------|---------| 
| `s[-3:-1]`	| `'ชา'`	  | ถูกต้องดี
| `s[-3:0]`		| `''`		| เหมือนว่าเราควรจะได้ `'ชาย'` แต่ว่าไม่ได้ เพราะ 0 ชี้ไปที่ต้นสตริงซึ่งมาก่อน -3 
| `s[5:2]`		| `''`		| 2 ชี้ไปที่ตำแหน่งที่มาก่อน 5  
| `s[5:10000]`	| `'ชาย'`		| ควรจะได้ error แต่ว่าไพธอนปล่อยไปถึงแม้ index จะเกิน
| `s[-100:-1]`	| `'นายสมชา'`	| ควรจะได้ error แต่ว่าไพธอนปล่อยไปถึงแม้ index จะเกิน

### String operator และ built-in function
นอกเหนือจาก operator `[]` แล้วสตริงยังมี operator ที่ใช้ได้อยู่อีก 4 ตัว 

| Operator  		| ความหมาย 				  | ตัวอย่าง |
| --------  		| ---------				  | -------|
| + 				| ต่อสตริง (concatenate)	| `'aa' + 'bb'` --> `'aabb'`| 
| * 				| ซ้ำสตริง      			| `'abc' * 23` --> `abcabcabc`| 
| `in`	    		| เช็คว่ามีสตริงหนึ่งเป็นสตริงย่อยอีกสตริงหนึ่งหรือไม่ | `'a' in 'girl'` --> `False` |
|					|						   |   `'i' in 'girl'` --> `True`
| `not in`			| นิเสธของ `in`			  |   `'a' not in 'girl'` --> `True`
| ==				| เท่ากันเป๊ะหรือไม่			| `'girl' == 'girl'` --> `True` |
|					|							| `'girl' == 'Girl` --> `False`
| `len(s)`			| return ความยาวสตริง		| `len('girl')` --> 4 


### `for` loop บนสตริง
```{margin} คำศัพท์
iterate คือ การไล่ดึงข้อมูลมาทีละตัว เพื่อนำมาประมวลผลด้วยคำสั่งอื่น ๆ 
```
สตริง คือการนำอักขระหลาย ๆ ตัวมาต่อกันเป็นสายเดียว ในบางครั้งเราต้องการนำอักขระออกมาประมวลผลทีละตัว เช่น เราอยากนับว่าในสตริงมีตัวเลขทั้งหมดกี่ตัว มีอักษรภาษาอังกฤษทั้งหมดกี่ตัว หรือมีสระกี่ตัว เราต้องจะต้องเริ่มจากการดึงตัวอักษรออกมาทีละตัว (iterate) ออกมาตรวจสอบและนับ 

การ iterate ไปบนสตริงเราจะใช้ `for` ในการดึงตัวอักษรดังนี้
```python
s = 'abcdefg'
for alph in s:	# alph เป็นตัวแปรเก็บแทนตัวอักขระแต่ละตัว ในแต่ละรอบลูป
	print(alph)	# แสดงผลค่าของ alph
```
Output
```
a
b
c
d
e
f
g
```

อีกวิธีคือ iterate ลงไปบน index ของสตริงและดึงตัวอักขระโดยใช้ `[]` 
```python
s = 'abcdefg'
for i in range(len(s)):	# i เป็นตัวแปรเก็บ index จาก 0 ถึง len(s) ในแต่ละรอบลูป
	print(s[i])			# แสดงผลค่าของอักขระที่ index i 
```

## เมท็อดของสตริง

```{margin} คำศัพท์
*อ็อบเจกต์ (object)* มีหน้าที่เก็บข้อมูล นอกจากนั้นยังมี *เมท็อด (method)* ต่างๆ ที่ช่วยนำข้อมูลที่เก็บอยู่มาใช้ให้ได้สะดวกขึ้น
```
สตริงเป็นอ็อบเจกต์ ประเภทแรกที่เราจะเรียนรู้วิธีการใช้ในภาษาไพธอน อ็อบเจกต์เป็นสิ่งที่ไว้เก็บข้อมูลต่าง ๆ ไว้ภายในเพื่อจะนำไปใช้กับฟังก์ชันอื่น ๆ ได้ง่าย อ็อบเจกต์มีสิ่งที่เรียกว่าเมท็อด (method) ติดตัวมาด้วย ซึ่งก็คือฟังก์ชันที่นำเอาข้อมูลที่อ็อบเจกต์ที่เรียกเมท็อดนั้นขึ้นมาใช้ ในการเรียกใช้เมท็อดเราจำเป็นต้องรู้ว่า
1. อ็อบเจกต์ชนิดนั้นมีเมท็อดชื่ออะไรบ้าง
2. เมท็อดที่จะใช้นั้น input คืออะไร
3. เมท็อดที่จะใช้นั้น return output อะไร และเป็นไทป์อะไร

คำสั่งในการใช้คือ `object.ชื่อmethod(parameter)` ตัวอย่าง เช่น 
```
name = 'james'
name.is_upper()
```
ตัวแปร `name` เก็บสตริง `'james'` ไว้โดยการสร้าง string literal แบบใช้ single quote จากนั้นสตริงนั้นเรียกเมท็อด `is_upper` ซึ่งไม่ต้องการพารามิเตอร์ และ return บูลีนที่บ่งบอกว่าสตริงที่เก็บอยู่นั้นเป็นตัวลาตินตัวพิมพ์ใหญ่หรือไม่ 

สตริงในภาษาไพธอนมีเมท็อดเยอะมาก ๆ ไม่มีโปรแกรมเมอร์ไหนพยายามจำทั้ง จะจำได้เฉพาะเมท็อดที่ใช้หน้างานบ่อย ๆ ถ้าหากจำไม่ได้สามารถเสิร์ชหาออนไลน์ได้ และโปรแกรมเมอร์เปิดหากันเป็นปกติ แต่เพื่อความสะดวกคล่องตัวในการเขียนโปรแกรมที่เกี่ยวกับการประมวลผลข้อมูลที่เป็นข้อความ เราควรจะต้องรู้จักเมท็อดของสตริงดังนี้

### สร้างสตริงจากตัวแปรอื่น ๆ: `.format()`

```python
name = 'John'
age = 36
template = "My name is {}, I'm {}"
result = template.format(name, age)
print(result)  # My name is John, I'm 36

print(f"My name is {name}, I'm {age}") # My name is John, I'm 36
```

เมท็อด `format` ใช้เวลาเราต้องการสร้าง template ขึ้นมาเพื่อใช้เอาค่าอื่น ๆ มาเติมทีหลังเพื่อให้เป็นสตริงที่สมบูรณ์ เราจะใช้ `{}` เป็นสัญลักษณ์ของช่องว่างที่เว้นเพื่อเอาค่าอื่นมาเติม (placeholder) ซึ่งเราจะใช้กี่ตัวก็ได้ แต่ตอนเรียก `.format` เราจะต้องใส่จำนวนพารามิเตอร์เท่ากับจำนวนของ placeholder ที่เราวางไว้ และจะเติมจากซ้ายไปขวา ถ้าใส่น้อยไปเราจะได้ `IndexError` ถ้าใส่มากไปเครื่องจะไม่ว่าอะไร 

อีกวิธีคือการใช้ f string คือสตริงที่มีเครื่องหมาย `f` นำหน้าเพื่อบอกให้เครื่องรู้ว่าเป็น formatting string เราสามารถใส่ชื่อตัวแปรเข้าไปใน `{}` ได้เลย ทำให้ประหยัดโค้ดไปได้ระดับหนึ่ง และดูสบายตากว่า ตัวแปรที่อยู่ใน `{}` จะถูกแปลความให้เป็นค่าที่ตัวแปรนั้นเก็บอยู่ จากนั้นแปลงเป็นสตริง 

อีกตัวอย่างของการใช้ f string
```python
country = 'Thailand'
welcome_message = f'Welcome to {country}'
print (welcome_message)
```
เครื่องจะแสดงผลคำว่า `Welcome to Thailand` ซึ่งเกิดจากการสร้างเอฟสตริงที่ดึงเอาค่าของตัวแปร `country` เข้ามารวมในสตริง แต่ถ้าเราเผลอลืมใช้ `{}` ในเอฟสตริง เราจะไม่ได้ผลตามต้องการ กล่าวคือเราจะไม่ได้ดึงเอาค่าของตัวแปรมาใส่ในสตริง 
```python
country = 'Thailand'
welcome_message = f'Welcome to country'
print (welcome_message)
```
เครื่องจะแสดงผลคำว่า `Welcome to country`

### เปลี่ยนเป็นตัวเล็กหรือตัวใหญ่: `.lower()` และ `.upper()`

```python
s = 'James'
s.lower() #--> 'james'
s.upper() #--> 'JAMES'
```

`string.lower()` return สตริงที่มีตัวอักษรเหมือนกันแต่เป็นตัวเล็กทั้งหมด

`string.upper()`return สตริงที่มีตัวอักษรเหมือนกันแต่เป็นตัวใหญ่ทั้งหมด

*ข้อควรระวัง* ทั้งสองเมท็อดเมื่อเราเรียกใช้แล้วจะ return สตริงชุดใหม่มาให้ แยกต่างหากจากตัวสตริงเดิม ซึ่งจะมีค่าข้อความเดิมอยู่ไม่เปลี่ยนแปล

คำสั่งเหล่านี้มีประโยชน์เวลาเราอยากเปรียบเทียบข้อความสองข้อความว่าเหมือนกันหรือไม่โดยไม่สนใจว่าเป็นตัวเล็กตัวใหญ่ (case-insensitive) 

### เช็คว่าเป็นตัวเล็กหรือตัวใหญ่: `.islower()` และ `.isupper()`

```python
s = 'NASA'
s.islower() #--> False
s.isupper() #--> True

s2 = 'Casa'
s2.islower() #--> False เพราะไม่ใช่ตัวเล็กหมด
s2.isupper() #--> False เพราะไม่ใช่ตัวใหญ่หมด
s2[0].isupper() #--> True ตัวอักษรตัวแรกเป็นตัวใหญ่
```

`string.islower()` return `True` ถ้าทุกอักขระเป็นตัวเล็กทั้งหมด

`string.isupper()` return `True` ถ้าทุกอักขระเป็นตัวใหญ่ทั้งหมด

คำสั่งเหล่านี้มีประโยชน์เวลาต้องการเช็คว่าเป็นตัวย่อของชื่อองค์กรต่าง ๆ หรือไม่ หรือเป็นคำที่อยู่กลางประโยคภาษาอังกฤษหรือไม่ แต่คำสั่งเหล่านี้ไม่มีประโยชน์กับภาษาอื่น ๆ ที่ไม่ได้ใช้ตัวลาติน เช่น ภาษาจีน ภาษาไทย ภาษาเกาหลี ภาษารัสเซีย 

### นับ substring ในสตริง: `.count(substring)`

```python
laughter = 'hahahahaha'
laughter.count('ha') #--> 5

plea = 'รูหนูสู่รูปู งูสุดสู้ หนูสู้งู'
plea.count('ู') #--> 10
```

`string.count(substring)` return จำนวนครั้งที่พบ substring ที่ในสตริงที่เรียกเมท็อดนี้ ถ้าใส่ input มาเป็นตัวอักษรตัวเดียว ก็จะนับจำนวนครั้งที่พบตัวอักษรนั้น

คำสั่งนี้มีประโยชน์เวลาเราต้องการนับจำนวนคำที่อยู่ในสตริงที่เก็บข้อมูลทั้งหมดเอาไว้ เช่น หนังสือทั้งเล่ม หนังสือพิมพ์ทุกฉบับของเดือนนั้น หรือนับจำนวนคำภาษาอังกฤษแบบหยาบ ๆ โดยการนับเครื่องหมาย `' '` ที่มีอยู่ในข้อมูลทั้งหมด 

### เช็คประเภทของตัวอักขระ: `isdigit()` `isalpha()` `isalnum()`

```python
text = '6578012478'
license_plate = '3ก4951'
student_name = 'ยาใจ'

student_id.isdigit() #--> True
student_id.isalpha() #--> False
student_id.isalnum() #--> True
license_plate.isdigit() #--> False
license_plate.isalpha() #--> False
license_plate.isalnum() #--> True
student_name.isdigit() #--> False
student_name.isalpha() #--> True
student_name.isalnum() #--> True
```

สามเมท็อดนี้มีไว้สำหรับเช็คว่าสตริงที่เรียกประกอบด้วยอักขระประเภทใดประเภทหนึ่งหรือไม่
- `.isdigit` return `True` ถ้าสตริงประกอบด้วยตัวเลขอารบิกทั้งหมด ถ้ามีตัวใดตัวหนึ่งที่ไม่ใช่ตัวเลขอารบิกจะ return `False`
- `.isalpha` return `True` ถ้าสตริงประกอบด้วยตัวหนังสือทั้งหมด ตัวหนังสือคือตัวอักขระอะไรก็ได้ภาษาใดก็ได้ที่ไม่ใช่เครื่องหมายวรรคตอนภาษาอังกฤษ ไม่ใช่ emoji ไม่ใช่ตัวเลข alpha ในชื่อของเมท็อดย่อมาจาก alphabet ซึ่งแปลว่าตัวอักษร
- `.isalnum` return `True` ถ้าสตริงมีแต่ alphabet และตัวเลขอารบิกทั้งหมด กล่าวคือไม่มีเครื่องหมายวรรคตอนอยู่เลย alnum ในชื่อเมท็อดย่อมาจาก alphanumeric ซึ่งหมายถึง alphabet และ number นั่นเอง 

### แทน substring ด้วยสตริงอื่น: `.replace(old, new)`

```python
text = 'ประเภทของคำมี 7 ประเภทใหญ่'
text.replace('ประเภท','ชนิด') #--> 'ชนิดของคำมี 7 ชนิดใหญ่'
print(text) # ประเภทของคำมี 7 ประเภทใหญ่

country = 'U.S.A.'
country.replace('.','') #--> 'USA'
```

เมท็อด `.replace` คล้าย ๆ กับปุ่ม Find and replace ที่เราพบเห็นได้ในโปรแกรม word processing ทั่ว ๆ ไป เราระบุ substring ที่เราต้องการหา และระบุไปว่าอยากจะแทนที่ด้วย string อะไร

เมท็อด นี้จะไม่เปลี่ยนค่าของสตริงที่เราใช้เรียก แต่ว่าจะสร้างสตริงใหม่ return กลับมาให้เป็นอีกชุดหนึ่งที่แยกต่างหากออกมา ซึ่งเราจะต้องเก็บใส่ตัวแปรอีกตัวนึงก่อนจะนำไปทำกระบวนการอื่นต่อ ซึ่งคล้าย ๆ กับเมท็อด`.lower()` `.upper()` หรือ `.format()`

### ลบช่องว่างข้างหน้าข้างหลังสตริงออกไป: `.strip()`


```python
password = '  loveme123'
password.strip() #--> 'loveme123'

password2 = ' iamawesome555 '
password2.strip() #--> 'iamawesome555'
```

เมท็อดนี้ใช้บ่อยเวลาเราต้องการทำความสะอาดข้อมูลภาษาที่เราได้มา ซึ่งมักจะมีช่องว่างข้างหน้าคือข้างหลังติดมาด้วย เวลาเราโหลดข้อมูลมาจากแหล่งข้อมูลจริง ซึ่งมักจะทำให้เรานับจำนวนตัวอักษรผิดพลาดเมท็อดนี้สร้างสตริงเวอร์ชันใหม่ขึ้นมาที่ไม่มีช่องว่างน่าหลัง 

เมท็อดนี้จะไม่เปลี่ยนค่าของสตริงที่เราใช้เรียก แต่ว่าจะสร้างสตริงใหม่ return กลับมาให้เป็นอีกชุดหนึ่งที่แยกต่างหากออกมาเช่นกันกับเมท็อดอื่นๆ ข้างต้น
